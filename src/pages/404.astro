---
import Layout from '~/layouts/Layout.astro'
---

<Layout title="页面未找到" description="404 页面">
  <div class="fullPage not-found flex-1 flex justify-center font-mono">
    <div class="relative z-[1] w-full max-w-3xl py-12 px-8 text-sm">
      <div class="flex items-center text-muted-foreground mb-2 animate-fade-in">
        <span class="text-green-500 mr-2 w-4 text-center">$</span>
        <span class="animate-typing" style="animation-delay: 0s;">很高兴认识你！</span>
      </div>
      <div class="flex items-center text-muted-foreground mb-2 animate-fade-in" style="animation-delay: 0.3s">
        <span class="text-green-500 mr-2 w-4 text-center">$</span>
        <span class="animate-typing" style="animation-delay: 0.3s">cd /home</span>
      </div>
      <div class="flex items-center text-muted-foreground mb-2 animate-fade-in" style="animation-delay: 0.5s">
        <span class="text-red-500 mr-2 w-4 text-center">✗</span>
        <span class="animate-typing" style="animation-delay: 0.5s">错误：目录未找到！</span>
      </div>
      <div class="flex items-center text-muted-foreground mb-2 animate-fade-in" style="animation-delay: 0.7s">
        <span class="text-green-500 mr-2 w-4 text-center">$</span>
        <span class="animate-typing text-muted-foreground/50" style="animation-delay: 0.7s">可用命令：</span>
      </div>
      <div class="flex items-center text-muted-foreground mb-2 ml-5 animate-fade-in" style="animation-delay: 0.9s">
        <span class="text-blue-500 mr-2 w-4 text-center">›</span>
        <span class="animate-typing cursor-pointer hover:text-foreground" style="animation-delay: 0.9s" onclick="history.back()">cd ..</span
        >
      </div>
      <div class="flex items-center text-muted-foreground mb-2 ml-5 animate-fade-in" style="animation-delay: 1.1s">
        <span class="text-blue-500 mr-2 w-4 text-center">›</span>
        <span class="animate-typing cursor-pointer hover:text-foreground" style="animation-delay: 1.1s" onclick="window.location.href='/'"
          >cd /</span
        >
      </div>
    </div>
  </div>
</Layout>

<style>
  .animate-typing {
    animation: typing 1s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    overflow: hidden;
    white-space: nowrap;
    display: inline-block;
    max-width: 100%;
  }

  @keyframes typing {
    from {
      width: 0ch;
    }
    to {
      width: var(--typing-width, 100%);
    }
  }

  @keyframes fadeIn {
    0% {
      opacity: 0;
      transform: translateY(-4px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in {
    animation: fadeIn 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    opacity: 0;
    will-change: transform;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.animate-typing').forEach((el) => {
      const text = el.textContent || '';
      const textLength = text.length;
      // 为中文字符提供更多宽度空间，乘以1.5作为安全系数
      (el as HTMLElement).style.setProperty('--typing-width', `${textLength * 1.5}ch`);
      
      // 根据文本长度调整动画持续时间，确保长文本有足够时间显示
      const animationDuration = Math.max(1, textLength * 0.05); // 至少1秒，每个字符0.05秒
      (el as HTMLElement).style.animationDuration = `${animationDuration}s`;
    });
  });
</script>
